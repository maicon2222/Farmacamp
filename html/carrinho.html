<!DOCTYPE html>

<html lang="pt-br">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Meu Carrinho - Farmacamp</title>
<link href="../css/style.css" rel="stylesheet"/>
<link href="../css/carrinho.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet"/>
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"/>
</head>
<body>
<header>
<div class="logo-container">
<h1>Farmacamp</h1>
<!-- <p>Saúde com qualidade e confiança</p> -->
</div>
<nav class="header-menu">
<a href="index.html">Início</a>
<a href="produtos.html">Produtos</a>
<a href="vantagens.html">Vantagens</a>
<a href="contato.html">Contato</a>
<!-- <a href="blog.html">Blog</a> -->
<!-- <a href="sobre.html">Sobre</a> -->
</nav>
<div class="search-container">
<input placeholder="Pesquisar..." type="text"/>
<button class="search-btn" type="submit">
<i class="fa fa-search"></i> <!-- Ícone de lupa -->
</button>
</div>
<div class="user-cart-container">
<a class="user-account" href="minha-conta.html">
<i class="fa fa-user"></i> Minha Conta
        </a>
<a class="user-cart" href="carrinho.html">
<i class="fa fa-shopping-cart"></i> Meu Carrinho
        </a>
</div>
</header>
<!-- HERO DO CARRINHO -->
<section class="carrinho-hero" data-aos="fade-down">
<div class="carrinho-hero-content">
<i class="fas fa-shopping-cart"></i>
<h1>Meu Carrinho</h1>
<p>Revise seus produtos e finalize sua compra com segurança</p>
<div class="carrinho-stats">
<span class="stats-item"><i class="fas fa-box"></i> <span id="total-items">0</span> itens</span>
<span class="stats-item"><i class="fas fa-truck"></i> Entrega grátis</span>
<span class="stats-item"><i class="fas fa-shield-alt"></i> Compra segura</span>
</div>
</div>
</section>
<!-- CONTEÚDO PRINCIPAL -->
<main class="carrinho-main">
<div class="carrinho-container">
<!-- LISTA DE PRODUTOS -->
<section class="carrinho-produtos" data-aos="fade-up">
<div class="carrinho-header">
<h2><i class="fas fa-shopping-bag"></i> Produtos no Carrinho</h2>
<span id="produtos-count">0 produtos</span>
</div>
<div class="carrinho-lista" id="carrinho-lista">
<!-- Produtos serão inseridos aqui via JavaScript -->
</div>
<div class="carrinho-vazio" id="carrinho-vazio" style="display: none;">
<i class="fas fa-shopping-cart"></i>
<h3>Seu carrinho está vazio</h3>
<p>Adicione produtos para continuar comprando</p>
<a class="btn-continuar-comprando" href="produtos.html">
<i class="fas fa-arrow-left"></i> Continuar Comprando
          </a>
</div>
</section>
<!-- RESUMO DO PEDIDO -->
<aside class="resumo-pedido" data-aos="fade-left">
<div class="resumo-header">
<h3><i class="fas fa-receipt"></i> Resumo do Pedido</h3>
</div>
<div class="resumo-itens">
<div class="resumo-item">
<span>Subtotal</span>
<span id="subtotal">R$ 0,00</span>
</div>
<div class="resumo-item">
<span>Frete</span>
<span id="frete">Grátis</span>
</div>
<div class="resumo-item desconto" id="desconto-item" style="display: none;">
<span>Desconto</span>
<span id="desconto-valor">-R$ 0,00</span>
</div>
<div class="resumo-total">
<span>Total</span>
<span id="total-final">R$ 0,00</span>
</div>
</div>
<!-- CUPOM DE DESCONTO -->
<div class="cupom-section">
<div class="cupom-input">
<input id="cupom-input" placeholder="Código de desconto" type="text"/>
<button class="btn-aplicar-cupom" id="aplicar-cupom">
<i class="fas fa-tag"></i> Aplicar
            </button>
</div>
<div class="cupom-sugerido">
<span>Use o cupom <strong>PRIMEIRA10</strong> e ganhe 10% de desconto!</span>
</div>
</div>
<!-- BOTÕES DE AÇÃO -->
<div class="carrinho-acoes">
<button class="btn-finalizar-compra" id="btn-finalizar">
<i class="fas fa-credit-card"></i> Finalizar Compra
          </button>
<a class="btn-continuar" href="produtos.html">
<i class="fas fa-plus"></i> Adicionar Mais Produtos
          </a>
</div>
<!-- INFORMAÇÕES ADICIONAIS -->
<div class="info-adicional">
<div class="info-item">
<i class="fas fa-truck"></i>
<div>
<strong>Entrega Grátis</strong>
<span>Para compras acima de R$ 50,00</span>
</div>
</div>
<div class="info-item">
<i class="fas fa-undo"></i>
<div>
<strong>Devolução Grátis</strong>
<span>Até 30 dias após a compra</span>
</div>
</div>
<div class="info-item">
<i class="fas fa-shield-alt"></i>
<div>
<strong>Compra Segura</strong>
<span>Site protegido e certificado</span>
</div>
</div>
</div>
</aside>
</div>
<!-- PRODUTOS RELACIONADOS -->
<section class="produtos-relacionados" data-aos="fade-up">
<h3><i class="fas fa-star"></i> Produtos Relacionados</h3>
<div class="relacionados-grid">
<div class="produto-relacionado">
<img alt="Vitamina D" src="../img/vitamina.png"/>
<h4>Vitamina D 1000UI</h4>
<div class="preco-relacionado">R$ 25,90</div>
<button class="btn-adicionar-relacionado" data-preco="25.90" data-produto="Vitamina D 1000UI">
<i class="fas fa-cart-plus"></i> Adicionar
          </button>
</div>
<div class="produto-relacionado">
<img alt="Shampoo L'Oréal" src="../img/L'Oréal.png"/>
<h4>Shampoo L'Oréal</h4>
<div class="preco-relacionado">R$ 18,90</div>
<button class="btn-adicionar-relacionado" data-preco="18.90" data-produto="Shampoo L'Oréal">
<i class="fas fa-cart-plus"></i> Adicionar
          </button>
</div>
<div class="produto-relacionado">
<img alt="Suplemento Cimed" src="../img/cimed.png"/>
<h4>Suplemento Cimed</h4>
<div class="preco-relacionado">R$ 32,50</div>
<button class="btn-adicionar-relacionado" data-preco="32.50" data-produto="Suplemento Cimed">
<i class="fas fa-cart-plus"></i> Adicionar
          </button>
</div>
</div>
</section>
</main>
<!-- FOOTER -->
<section class="sectionFooter">
<div id="footer1">
<ul>
<p class="central"> Serviços </p>
<li> <a href="#"> Farmacêuticos Farmacamp </a></li>
<li> <a href="#"> Nossas Lojas</a></li>
<li><a href="#"> Progamas dos laboratórios</a></li>
<p class="central"> Institucional </p>
<li> <a href="#"> Nossa História </a></li>
<li> <a href="#"> Logística Reversa de Medicamentos</a></li>
<li><a href="#">Trabalhe conosco</a></li>
<li><a href="#">Imprensa</a></li>
<li><a href="#">Política de Privacidade</a></li>
<li><a href="#">Política de cookies</a></li>
</ul>
</div>
<div id="footer2">
<ul>
<p class="central"> Minha Conta </p>
<li> <a href="#"> Como Comprar no Site </a></li>
<li> <a href="#"> Formas de pagamentos disponíveis</a></li>
<li><a href="#"> Prazo de reembolso</a></li>
<li><a href="#">Troca ou devolução</a></li>
<p class="central">Outras Informações </p>
<li> <a href="#"> Logística reversa</a></li>
<li><a href="#"> Regulamentações da ANVISA</a></li>
<li><a href="#"> Manual do usuário</a></li>
</ul>
</div>
<div id="footer3">
<ul>
<p class="central"> Central de Atendimento </p>
<li> <img alt=" ícone de telefone " src="https://img.icons8.com/material-sharp/24/000000/no-phones--v1.png"/> (11) 94575-2271</li>
<li><img alt="ícone de email " src="https://img.icons8.com/material-outlined/24/000000/email.png"/> contato@Farmacamp.br </li>
<li><img alt="ícone de servidor " src="https://img.icons8.com/material/24/000000/internet.png"/> www.farmacamp.com.br </li>
<li><img alt="ícone de mapa" src="https://img.icons8.com/material/24/000000/marker--v1.png"/><a href="#"> Rua senac, Campinas - São paulo, Brasil, CEP 00000-000</a></li>
<p class="central" id="formasPg"> Formas de pagamento:</p>
<div class="pagamento">
<li><img alt="ícone do cartão " src="https://img.icons8.com/fluency/48/000000/mastercard.png"/></li>
</div>
<div class="pagamento">
<li><img alt="ícone do cartão" src="https://img.icons8.com/fluency/48/000000/visa.png"/></li>
</div>
<div class="pagamento">
<li><img src="https://img.icons8.com/fluency/48/000000/card-in-use-1.png"/></li>
</div>
</ul>
</div>
</section>
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
<script>
    // Inicializar AOS
    AOS.init({
      duration: 800,
      once: true
    });

    // Função para carregar os itens do carrinho
    function carregarCarrinho() {
      const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
      const carrinhoLista = document.getElementById('carrinho-lista');
      const carrinhoVazio = document.getElementById('carrinho-vazio');
      const produtosCount = document.getElementById('produtos-count');
      const totalItems = document.getElementById('total-items');
      
      let total = 0;
      let totalItemsCount = 0;

      carrinhoLista.innerHTML = '';

      if (carrinho.length === 0) {
        carrinhoVazio.style.display = 'block';
        carrinhoLista.style.display = 'none';
        produtosCount.textContent = '0 produtos';
        totalItems.textContent = '0';
        atualizarResumo(0);
        return;
      }

      carrinhoVazio.style.display = 'none';
      carrinhoLista.style.display = 'block';

      carrinho.forEach((item, index) => {
        const itemDiv = document.createElement('div');
        itemDiv.classList.add('carrinho-item');
        itemDiv.setAttribute('data-aos', 'fade-up');
        
        const precoItem = parseFloat(item.preco) * (item.quantidade || 1);
        total += precoItem;
        totalItemsCount += (item.quantidade || 1);

        itemDiv.innerHTML = `
          <div class="item-imagem">
            <img src="../img/${getImagemProduto(item.nome)}" alt="${item.nome}" onerror="this.src='https://via.placeholder.com/80x80/f0f0f0/999?text=Produto'">
          </div>
          <div class="item-info">
            <h4>${item.nome}</h4>
            <div class="item-preco">R$ ${parseFloat(item.preco).toFixed(2).replace('.', ',')}</div>
            <div class="item-acoes">
              <button class="btn-remover" data-index="${index}" title="Remover produto">
                <i class="fas fa-trash"></i> Remover
              </button>
            </div>
          </div>
          <div class="item-quantidade">
            <label>Quantidade:</label>
            <div class="quantidade-controles">
              <button class="btn-quantidade" data-index="${index}" data-action="diminuir">-</button>
              <input type="number" value="${item.quantidade || 1}" min="1" max="99" data-index="${index}">
              <button class="btn-quantidade" data-index="${index}" data-action="aumentar">+</button>
            </div>
          </div>
          <div class="item-total">
            <span>Total:</span>
            <strong>R$ ${precoItem.toFixed(2).replace('.', ',')}</strong>
          </div>
        `;

        carrinhoLista.appendChild(itemDiv);
      });

      produtosCount.textContent = `${carrinho.length} produto${carrinho.length > 1 ? 's' : ''}`;
      totalItems.textContent = totalItemsCount;
      atualizarResumo(total);
    }

    // Função para obter imagem do produto
    function getImagemProduto(nome) {
      const imagens = {
        'Paracetamol 500mg': 'paracetamol.png',
        'Tadalafila': 'tadala.png',
        'Dipirona Gotas': 'dipirona.png',
        'Shampo': 'transferir (5).jpg',
        'Cetaphil 127g': 'sabonete em barra.png',
        'Antigripal 500mg': 'antigripal.png',
        'Creme Hidratante': 'creme hidratante.png',
        'Pomada Anti-inflamatória': 'pomada Anti-inflamatoria.png',
        'Álcool Gel 500ml': 'Álcool Gel.png',
        'Protetor Solar FPS 50': 'protetor-Solar.png',
        'Vitamina C 1000mg': 'vitamina C.png',
        'Fralda Pampers P - 30un': 'fralda pampers.png'
      };
      return imagens[nome] || 'img.png';
    }

    // Função para atualizar resumo
    function atualizarResumo(subtotal) {
      const desconto = parseFloat(localStorage.getItem('desconto')) || 0;
      const total = subtotal - desconto;
      
      document.getElementById('subtotal').textContent = `R$ ${subtotal.toFixed(2).replace('.', ',')}`;
      document.getElementById('total-final').textContent = `R$ ${total.toFixed(2).replace('.', ',')}`;
      
      if (desconto > 0) {
        document.getElementById('desconto-item').style.display = 'flex';
        document.getElementById('desconto-valor').textContent = `-R$ ${desconto.toFixed(2).replace('.', ',')}`;
      } else {
        document.getElementById('desconto-item').style.display = 'none';
      }
    }

    // Event listeners
    document.addEventListener('DOMContentLoaded', function() {
      carregarCarrinho();

      // Controles de quantidade
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('btn-quantidade')) {
          const index = parseInt(e.target.dataset.index);
          const action = e.target.dataset.action;
          const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
          
          if (carrinho[index]) {
            if (action === 'aumentar') {
              carrinho[index].quantidade = (carrinho[index].quantidade || 1) + 1;
            } else if (action === 'diminuir') {
              carrinho[index].quantidade = Math.max(1, (carrinho[index].quantidade || 1) - 1);
            }
            localStorage.setItem('carrinho', JSON.stringify(carrinho));
            carregarCarrinho();
          }
        }

        // Remover item
        if (e.target.classList.contains('btn-remover')) {
          const index = parseInt(e.target.dataset.index);
          const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
          carrinho.splice(index, 1);
          localStorage.setItem('carrinho', JSON.stringify(carrinho));
          carregarCarrinho();
        }

        // Adicionar produto relacionado
        if (e.target.classList.contains('btn-adicionar-relacionado')) {
          const nome = e.target.dataset.produto;
          const preco = e.target.dataset.preco;
          const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
          
          carrinho.push({
            nome: nome,
            preco: preco,
            quantidade: 1
          });
          
          localStorage.setItem('carrinho', JSON.stringify(carrinho));
          carregarCarrinho();
          
          // Feedback visual
          e.target.innerHTML = '<i class="fas fa-check"></i> Adicionado';
          e.target.style.background = '#4caf50';
          setTimeout(() => {
            e.target.innerHTML = '<i class="fas fa-cart-plus"></i> Adicionar';
            e.target.style.background = '';
          }, 2000);
        }
      });

      // Input de quantidade
      document.addEventListener('change', function(e) {
        if (e.target.type === 'number' && e.target.hasAttribute('data-index')) {
          const index = parseInt(e.target.dataset.index);
          const quantidade = parseInt(e.target.value);
          const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
          
          if (carrinho[index] && quantidade > 0) {
            carrinho[index].quantidade = quantidade;
            localStorage.setItem('carrinho', JSON.stringify(carrinho));
            carregarCarrinho();
          }
        }
      });

      // Cupom de desconto
      document.getElementById('aplicar-cupom').addEventListener('click', function() {
        const cupom = document.getElementById('cupom-input').value.toUpperCase();
        
        if (cupom === 'PRIMEIRA10') {
          const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
          const subtotal = carrinho.reduce((total, item) => {
            return total + (parseFloat(item.preco) * (item.quantidade || 1));
          }, 0);
          
          const desconto = subtotal * 0.1; // 10% de desconto
          localStorage.setItem('desconto', desconto.toString());
          carregarCarrinho();
          
          this.innerHTML = '<i class="fas fa-check"></i> Aplicado';
          this.style.background = '#4caf50';
          document.getElementById('cupom-input').disabled = true;
        } else {
          alert('Cupom inválido! Use PRIMEIRA10 para 10% de desconto.');
        }
      });

      // Finalizar compra
      document.getElementById('btn-finalizar').addEventListener('click', function() {
        const carrinho = JSON.parse(localStorage.getItem('carrinho')) || [];
        if (carrinho.length === 0) {
          alert('Adicione produtos ao carrinho antes de finalizar a compra.');
          return;
        }
        
        alert('Compra finalizada com sucesso! Em breve você receberá um email com os detalhes.');
        localStorage.removeItem('carrinho');
        localStorage.removeItem('desconto');
        carregarCarrinho();
      });
    });
  </script>
</body>
</html>
